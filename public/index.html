<!DOCTYPE html>
<html lang="en">

<head>
    <title>Game front page</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>

<body>
    <img src="./images/volleyball-bg.png" class="background-image" alt="Background Image">

    <div id="user-panel" class="row">
        <div class="field-content row shadow">
            <span id="user-name">user_name</span>
        </div>
        <div class="button-group">
            <button id="signout-button" class="icon"><span class="material-icons">
                <?xml version="1.0" ?><svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M17 16L21 12M21 12L17 8M21 12L7 12M13 16V17C13 18.6569 11.6569 20 10 20H6C4.34315 20 3 18.6569 3 17V7C3 5.34315 4.34315 4 6 4H10C11.6569 4 13 5.34315 13 7V8" stroke="#374151" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg>
            </span></button>
            <button class="settings-button" id="settings-button">
                <svg class="svg-icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M592.7936 465.6128a93.056 93.056 0 1 0-34.3808 127.104 93.184 93.184 0 0 0 34.3808-127.104z m-53.6064 93.5936a54.4768 54.4768 0 1 1 20.1216-74.368 54.0928 54.0928 0 0 1-20.1216 74.368z" fill="#282828" /><path d="M701.44 511.5904a54.8608 54.8608 0 0 1 34.688-50.6624l16.5888-6.6816-5.376-17.0496a240.3328 240.3328 0 0 0-52.8128-91.3664l-12.032-13.0304-14.0544 10.8032a54.912 54.912 0 0 1-61.0816 4.2496 53.9136 53.9136 0 0 1-26.5728-54.1952l2.4064-17.664-17.4336-3.84a245.0688 245.0688 0 0 0-105.728 0l-17.152 3.712 2.2016 17.4592a55.1424 55.1424 0 0 1-88.0896 50.6112l-13.952-10.7008-11.9552 12.928a245.5552 245.5552 0 0 0-53.1968 91.3152l-5.4784 16.9216 16.4096 6.8864a53.9392 53.9392 0 0 1 33.28 50.2272 54.9632 54.9632 0 0 1-34.3552 50.5856l-16.384 6.7072 5.12 16.8704a240.4864 240.4864 0 0 0 52.224 91.6224l11.9808 13.2096 14.1312-10.88a54.8864 54.8864 0 0 1 61.1584-4.3264 53.76 53.76 0 0 1 26.3936 54.7328l-2.56 17.7664 17.536 3.8656a250.2912 250.2912 0 0 0 54.2464 6.0928 244.0448 244.0448 0 0 0 51.9936-5.6064l17.4848-3.84-2.56-17.7152a54.9888 54.9888 0 0 1 88.4992-50.7392l14.0288 11.0848 12.1344-13.1584a245.2224 245.2224 0 0 0 53.2992-91.8272l5.504-17.1264-16.6656-6.7072A53.76 53.76 0 0 1 701.44 511.5904z m-26.1376 127.744a93.7216 93.7216 0 0 0-135.68 77.7984 205.6448 205.6448 0 0 1-57.984-0.2816 92.16 92.16 0 0 0-46.208-75.008 93.184 93.184 0 0 0-88.192-2.7136 198.7584 198.7584 0 0 1-28.4672-49.9456 93.3376 93.3376 0 0 0 41.984-77.4656A92.3904 92.3904 0 0 0 320 434.4832a205.1584 205.1584 0 0 1 29.1328-50.1504A93.8752 93.8752 0 0 0 483.84 306.9696a205.6192 205.6192 0 0 1 57.984 0A93.056 93.056 0 0 0 676.2496 384a206.8736 206.8736 0 0 1 16.512 24.3456 204.16 204.16 0 0 1 12.2624 25.4208 93.2096 93.2096 0 0 0-42.2912 77.6192 92.0064 92.0064 0 0 0 41.5744 77.7728 206.2592 206.2592 0 0 1-29.0816 50.176z" fill="#282828" /></svg>
            </button> <!-- Add images here -->
        </div>
    </div>

    <div id = "active-games-panel" style="display:none;" class = "overlay">
        <div id = "gameOptions" class = "button-group">
            <button id="join">Join Existing Game</button>
            <button id="create">Create Game</button>
        </div>
        <div id = "active-games-area" style="display: none;"">
        </div>
    </div>

    <div class="overlay" id = "overlay">
        <div class="content">
            <h1>Volleyball Xtreme</h1>
            <div class="button-group">
              <button id="playButton">Sign in</button>
          </div>
      </div>
      <div class="overlay-panel" style="display: none;">
        <div class="panel" id="signInPanel">
            <h2>Sign In</h2>
                <form id = "signinform">
                    <input id = "signin-username" type="text" placeholder="Username" required>
                    <input id = "signin-password" type="password" placeholder="Password" required>
                    <button id = "signin-submit" type="submit">Sign In</button>
                </form>
                <a id = "signin-message" style="visibility: hidden;""> Sign in message </a>
            </div>
            <div class="panel" id="registerPanel">
                <h2>Register</h2>
                <form id="registrationform">
                    <input id = "reg-username" type="text" placeholder="Username" required>
                    <input id = "reg-name" type="text" placeholder="Name" required>
                    <input id = "reg-password" type="password" placeholder="Password" required>
                    <input id = "reg-confirm" type="password" placeholder="Confirm" required>
                    <button type="submit">Register</button>
                </form>
                <a id = "reg-message" style="visibility: hidden;""> Reg message </a>
            <!-- Registration form -->
            </div>
      </div>
  </div>

  <script src="/socket.io/socket.io.min.js"></script>
  <script src="scripts/ui.js"></script>
  <script src="scripts/socket.js"></script>
  <script src="scripts/registration.js"></script>
  <script src="scripts/auth.js"></script>

  <script>
    const overlayPanel = document.querySelector('.overlay-panel');

    document.getElementById('playButton').addEventListener('click', function() {
        document.querySelector('.content').style.display = 'none';
        overlayPanel.style.display = 'flex';
    });
 
    // $("#signinform").on("submit", function(event) {
    //     event.preventDefault(); // Prevent default form submission
// 
    //     console.log("hello???");
    //     $("#active-games-panel").show()
    //     overlayPanel.style.display = 'none'
    // })
    UI.initialize();
    Auth.validate(
            () => {
                SignInForm.hide(); // to be defined
                Auth.getUser();
                // GamesPanel.update(Auth.getUser()); // to be defined
                GamesPanel.show();

                Socket.connect();
            },
            () => { 
                console.log("on error, no user signed in");
                SignInForm.show();
            }
        );
    
    
    </script>
</body>

</html>